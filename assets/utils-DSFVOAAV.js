import{dK as i}from"./index-Ds3x37R4.js";function g(n){const t=p(f(n)),e=t,o=!0,s=Math.max(t/2,5),a=Math.round(i(n.maxPathLength)/s)+1,u=10,{density:c}=n;return{smoothing:i(n.smoothing),interpolate:!0,velocityScale:n.flowRepresentation==="flow-from"?1:-1,verticesPerLine:a,minSpeedThreshold:.001,segmentLength:s,maxTurnAngle:1,collisions:o,lineCollisionWidth:e,lineSpacing:u,density:c}}function p(n){return n.kind==="constant"?n.value[0]:n.values[n.values.length-1]}function r(n){const t=n.toRgba();return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function v(n){return{kind:"constant",value:[.1,.1,.1,1]}}function f(n){if(!n.hasVisualVariables("size"))return{kind:"constant",value:[i(n.trailWidth)]};const t=n.getVisualVariablesForType("size")[0],e=[],o=[];let s;if(t.stops){for(const a of t.stops)e.push(a.value),o.push(i(a.size));s=t.stops.length}else e.push(t.minDataValue,t.maxDataValue),o.push(i(t.minSize),i(t.maxSize)),s=2;return{kind:"ramp",stops:e,values:o,count:s}}function y(n){if(!n.hasVisualVariables("color"))return{kind:"constant",value:r(n.color)};const t=n.getVisualVariablesForType("color")[0],e=[],o=[];for(const s of t.stops)e.push(s.value),Array.prototype.push.apply(o,r(s.color));return{kind:"ramp",stops:e,values:o,count:t.stops.length}}function k(n){if(!n.hasVisualVariables("opacity"))return{kind:"constant",value:[1]};const t=n.getVisualVariablesForType("opacity")[0],e=[],o=[];for(const s of t.stops)e.push(s.value),o.push(s.opacity);return{kind:"ramp",stops:e,values:o,count:t.stops.length}}function l(n,t,e,o){switch(t){case"int":n.setUniform1iv(e,o);break;case"float":n.setUniform1fv(e,o);break;case"vec2":n.setUniform2fv(e,o);break;case"vec3":n.setUniform3fv(e,o);break;case"vec4":n.setUniform4fv(e,o)}}function V(n,t,e,o){o.kind==="constant"?l(n,e,`u_${t}`,o.value):(l(n,"float",`u_${t}_stops`,o.stops),l(n,e,`u_${t}_values`,o.values),n.setUniform1i(`u_${t}_count`,o.count))}function h(n,t){let e=!0;return e=e&&n.collisions===t.collisions,e=e&&n.density===t.density,e=e&&n.interpolate===t.interpolate,e=e&&n.lineCollisionWidth===t.lineCollisionWidth,e=e&&n.lineSpacing===t.lineSpacing,e=e&&n.maxTurnAngle===t.maxTurnAngle,e=e&&n.minSpeedThreshold===t.minSpeedThreshold,e=e&&n.segmentLength===t.segmentLength,e=e&&n.smoothing===t.smoothing,e=e&&n.velocityScale===t.velocityScale,e=e&&n.verticesPerLine===t.verticesPerLine,e}function m(n,t){return n===t||n!=null&&t!=null&&n.equals(t)}function S(n,t){if(!h(n.simulationSettings,t.simulationSettings)||!m(n.timeExtent,t.timeExtent))return!1;let e=!0;return e=e&&n.loadImagery===t.loadImagery,e=e&&n.createFlowMesh===t.createFlowMesh,e=e&&n.color.kind===t.color.kind,e=e&&n.opacity.kind===t.opacity.kind,e=e&&n.size.kind===t.size.kind,e}export{p as a,y as c,m as d,V as f,S as g,h,v as l,k as p,g as s,f as u};
