const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Ds3x37R4.js","assets/index-Bq0sc0Rv.css"])))=>i.map(i=>d[i]);
import{ca as w,sL as _,cD as A,_ as O}from"./index-Ds3x37R4.js";import{L as m,M as F,N as W}from"./utils-BLoDoVZg.js";var n;(function(i){i[i.size=22]="size",i[i.lineWidth=50]="lineWidth",i[i.maxSize=120]="maxSize",i[i.maxOutlineSize=80]="maxOutlineSize",i[i.tallSymbolWidth=20]="tallSymbolWidth"})(n||(n={}));const g=w("android");w("chrome")||g&&g>=4;_();n.size;n.maxSize;n.maxOutlineSize;n.lineWidth;n.tallSymbolWidth;function z(i){return i&&"opacity"in i?i.opacity*z(i.parent):1}async function q(i,e){var f;if(!i)return;const h=i.sourceLayer,d=(e!=null&&e.useSourceLayer?h:i.layer)??h,s=e!=null&&e.ignoreOpacity?1:z(d);if(i.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const l=i.symbol.type==="web-style"?await i.symbol.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):i.symbol.clone();return m(l,null,s),l}const r=(e==null?void 0:e.renderer)??R(d);let a=r&&"getSymbolAsync"in r?await r.getSymbolAsync(i,e):null;if(!a)return;if(a=a.type==="web-style"?await a.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):a.clone(),!r||!("visualVariables"in r)||!((f=r.visualVariables)!=null&&f.length))return m(a,null,s),a;if("arcadeRequiredForVisualVariables"in r&&r.arcadeRequiredForVisualVariables&&(e==null?void 0:e.arcade)==null){const l={...e};l.arcade=await A(),e=l}const{getColor:V,getOpacity:x,getAllSizes:v,getRotationAngle:L}=await O(()=>import("./index-Ds3x37R4.js").then(l=>l.Ja),__vite__mapDeps([0,1])),c=[],u=[],t=[],p=[];for(const l of r.visualVariables)switch(l.type){case"color":c.push(l);break;case"opacity":u.push(l);break;case"rotation":p.push(l);break;case"size":l.target||t.push(l)}const S=!!c.length&&c[c.length-1],y=S?V(S,i,e):null,b=!!u.length&&u[u.length-1];let o=b?x(b,i,e):null;if(s!=null&&(o=o!=null?o*s:s),e!=null&&e.ignoreOpacity&&(o=1),y!=null&&b&&o!=null&&(y.a=1),m(a,y,o),t.length&&(e==null?void 0:e.ignoreSizeVariables)!==!0){const l=v(t,i,e);await F(a,l)}if((e==null?void 0:e.ignoreRotationVariables)!==!0)for(const l of p)W(a,L(l,i,e),l.axis);return a}function R(i){if(i)return"renderer"in i?i.renderer:void 0}export{q as x};
