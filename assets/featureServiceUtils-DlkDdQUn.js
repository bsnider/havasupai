import{ca as r}from"./index-Ds3x37R4.js";function g(n){const{objectIdField:t,uniqueIdFields:e}=n;return e!=null&&e.length?e.length>=2?{type:"unique-id-composite",fieldNames:e}:{type:"unique-id-simple",fieldName:e[0]}:{type:"object-id",fieldName:t}}function P(n,t,e,i,o,a){const s=x(i);if(!(r("featurelayer-snapshot-enabled")&&(e!=null&&e.query.supportsPagination)&&!(e!=null&&e.operations.supportsEditing)&&!t))return null;const u=f(o,a),{min:m,max:h}=s,p=u?h:m,c=d(i);let l=r("featurelayer-snapshot-initial-tolerance");return i!=="esriGeometryPoint"&&i!=="esriGeometryMultipoint"||(l=null),{supportsExceedsLimit:y(n,e),initialTolerance:l,maxFeatureCount:p,maxVertexCount:c}}function y(n,t){return!(!n&&!r("featurelayer-snapshot-non-hosted-exceedslimit-enabled"))&&(t==null?void 0:t.operations.supportsExceedsLimitStatistics)}function d(n){switch(n){case"esriGeometryPoint":return null;case"esriGeometryPolyline":case"esriGeometryPolygon":case"esriGeometryMultiPatch":case"esriGeometryMultipoint":return r("featurelayer-snapshot-max-vertex-count")}}function f(n,t){const e=t==null?void 0:t.clone().intersection(n),i=e!=null?e.width*e.height:0,o=t?t.width*t.height:0,a=o===0?0:i/o,s=r("featurelayer-snapshot-coverage");return!isNaN(a)&&a>=s}function x(n){switch(n){case"esriGeometryMultipoint":return{min:r("featurelayer-snapshot-multipoint-min-threshold"),max:r("featurelayer-snapshot-multipoint-max-threshold")};case"esriGeometryPoint":return{min:r("featurelayer-snapshot-point-min-threshold"),max:r("featurelayer-snapshot-point-max-threshold")};case"esriGeometryMultiPatch":case"esriGeometryPolygon":return{min:r("featurelayer-snapshot-polygon-min-threshold"),max:r("featurelayer-snapshot-polygon-max-threshold")};case"esriGeometryPolyline":return{min:r("featurelayer-snapshot-polyline-min-threshold"),max:r("featurelayer-snapshot-polyline-max-threshold")}}}export{g as e,P as t};
