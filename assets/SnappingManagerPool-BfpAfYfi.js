import{m6 as c,ae as s,m7 as i,m8 as u,il as l,dk as p,at as f,m9 as m,ma as d}from"./index-DXVHLZmj.js";const y=s.ofType(i);function g(t,e){const a=c((()=>{var n;return(n=t.map)==null?void 0:n.allLayers}),(n=>new i({layer:n})),{recycleItems:!0,createCollection:()=>new y}),o=new u({enabled:!0,selfEnabled:!1,featureEnabled:!0,featureSources:a,distance:e==null?void 0:e.distance,touchSensitivityMultiplier:(e==null?void 0:e.touchSensitivityMultiplier)??l.touchSensitivityMultiplier});return{...p(a),options:o}}const r=new Map;function C(t){if(!r.has(t)){const o=g(t,{distance:10}),n=M(t,o.options);r.set(t,{referenceCount:0,snappingManager:n,remove:()=>{o.remove(),n.destroy()}})}const e=r.get(t);e.referenceCount++;const a=f((()=>v(t,e)));return{snappingManager:e.snappingManager,...a}}function v(t,e){e.referenceCount--,e.referenceCount>0||d((()=>{e.referenceCount===0&&(e.remove(),r.delete(t))}))}function M(t,e){return new m({view:t,options:e})}export{C as a};
