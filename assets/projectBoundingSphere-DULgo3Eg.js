import{dU as p,dV as I,dW as n,dX as d,aU as C,dY as _,dZ as l,d_ as m}from"./index-CxDa6KP7.js";function P(r,o,t,u){if(o==null||u==null)return!1;const e=p(o,u);if((e==null?void 0:e.projector)==null)return!1;if(e.projector===I)return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],!0;const{source:s,dest:c,projector:E}=e;if(c.spatialReferenceId===n.WEB_MERCATOR){const a=d[s.spatialReferenceId][n.WGS84];return a!=null&&(a(r,0,f,0),_(f,0,t,0),t[3]=A(f[1],r[2],r[3],l.radius),!0)}if(s.spatialReferenceId!==n.WGS84&&s.spatialReferenceId!==n.CGCS2000||c.spatialReferenceId!==n.PLATE_CARREE){E(r,0,t,0);const a=s.metersPerUnit??1,i=c.metersPerUnit??1;t[3]=r[3]*a/i}else{const a=d[s.spatialReferenceId][n.SPHERICAL_ECEF],i=d[n.SPHERICAL_ECEF][n.PLATE_CARREE];let R=r[3];a!=null&&i!=null&&(R=A(r[1],r[2],r[3],l.radius)),E(r,0,t,0),t[3]=R}return!0}function A(r,o,t,u){const e=u+o;if(e<u/2||t>e)return Number.MAX_VALUE;const s=Math.abs(L*r)+Math.asin(t/e);return s>=Math.PI/2?Number.MAX_VALUE:t/Math.cos(s)}const f=C(),L=m(1);export{P as l};
