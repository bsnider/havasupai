import{ay as p,az as y,ab as b}from"./index-CxDa6KP7.js";function f(a,e){if(a.symbol!=null)return a.symbol;const t=e==null?void 0:e.renderer;return t!=null&&t.type!=="dot-density"?t.getSymbol(a,e):null}function m(a,e){const t=f(a,e);if(t==null)return null;const r=e==null?void 0:e.renderer,i=new p(r,t);if(r==null||!("visualVariables"in r)||!r.visualVariables)return i;const c=y(r,a,e)??[],o=["proportional","proportional","proportional"];for(const{variable:n,value:l}of c)if(l!=null||n.type==="size"&&n.useSymbolValue)switch(n.type){case"color":i.color=l==null?void 0:l.toRgba();break;case"size":if(n.target==="outline")i.outlineSize=l;else{const u=n.axis,s=n.useSymbolValue?"symbol-value":l??"proportional";switch(u){case"width":o[0]=s;break;case"depth":o[1]=s;break;case"height":o[2]=s;break;case"width-and-depth":o[0]=o[1]=s;break;default:o[0]=o[1]=o[2]=s}}break;case"opacity":i.opacity=l;break;case"rotation":switch(n.axis){case"tilt":i.tilt=l;break;case"roll":i.roll=l;break;default:i.heading=l}}return o[0]==="proportional"&&o[1]==="proportional"&&o[2]==="proportional"||(i.size=o),i}async function d(a,e){var t;return a.symbol!=null?a.symbol:((t=e==null?void 0:e.renderer)==null?void 0:t.getSymbolAsync(a,e))??null}async function v(a,e){const t=await d(a,e);if(!t)return null;const r=e==null?void 0:e.renderer,i=new p(r,t);if(!r||!("visualVariables"in r)||!r.visualVariables)return i;const c=y(r,a,e)??[],o=["proportional","proportional","proportional"];for(const{variable:n,value:l}of c)if(n.type==="color")i.color=b.toUnitRGBA(l);else if(n.type==="size")if(n.target==="outline")i.outlineSize=l;else{const u=n.axis,s=n.useSymbolValue?"symbol-value":l;u==="width"?o[0]=s:u==="depth"?o[1]=s:u==="height"?o[2]=s:o[0]=o[1]=u==="width-and-depth"?s:o[2]=s}else n.type==="opacity"?i.opacity=l:n.type==="rotation"&&n.axis==="tilt"?i.tilt=l:n.type==="rotation"&&n.axis==="roll"?i.roll=l:n.type==="rotation"&&(i.heading=l);return(isFinite(o[0])||isFinite(o[1])||isFinite(o[2]))&&(i.size=o),i}function w(a,e=0){const t=a[e];return typeof t=="number"&&isFinite(t)?t:null}function g(a){for(let e=0;e<3;e++){const t=a[e];if(typeof t=="number")return isFinite(t)?t:0}return 0}export{w as a,v as n,m as r,g as s};
